import{v as I,S as xe,_ as Ce}from"./AppLayout.vue_vue_type_script_setup_true_lang-3HDqZcXQ.js";import{d as Te,_ as g}from"./index-C9PH3Rfu.js";import{_ as $,a as E,b as Y,d as W,c as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-vR6FaAGB.js";import{_ as K}from"./index-CfIspb22.js";import{d as Se,x as w,k as Ve,D as Pe,J as Ie,c as f,o as r,a as l,u as o,h as $e,w as i,b as a,l as L,t as d,e as p,g as Ee,F as M,r as D,O as R,f as j,z as Q,R as n}from"./app-Dce_nnrQ.js";import{A as Ye}from"./arrow-left-BMvOakGf.js";import{P as B}from"./play-Bc_e1afw.js";import{P as ze,R as Me,V as je,a as Ae,M as Fe}from"./volume-x-BiLnRbeK.js";import{c as N}from"./createLucideIcon-k5xoKso6.js";import"./useForwardExpose-CjEZwap_.js";import"./VisuallyHidden-DvhTT12b.js";import"./RovingFocusGroup-CiH5oV9B.js";import"./useArrowNavigation-B5rxJs06.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-uU2hVG4j.js";import"./video-DXv3jawn.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=N("HeartIcon",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=N("MessageCircleIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=N("Share2Icon",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Be={class:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-6"},Ne={class:"flex items-center justify-between"},Ue={class:"flex items-center gap-4"},qe={class:"text-3xl font-bold tracking-tight"},Ze={class:"text-muted-foreground"},He={class:"flex gap-2"},Xe={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},Oe={class:"lg:col-span-3 space-y-4"},Ge={class:"video-container relative aspect-video bg-black rounded-lg overflow-hidden"},Je={key:0,id:"youtube-player",class:"w-full h-full"},We=["src"],Ke={class:"absolute inset-0 pointer-events-none"},Qe=["onClick","onMouseenter"],et={key:0,class:"h-full flex items-center justify-center p-2"},tt=["src","alt"],ot={key:3,class:"w-full h-full p-2 flex flex-col justify-center"},st={class:"text-sm font-medium mb-2"},lt={class:"space-y-1"},at=["href"],it={key:5,class:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-600"},nt={class:"mt-4 space-y-4"},rt={class:"space-y-2"},ut={class:"flex justify-between text-sm text-muted-foreground"},dt={class:"flex items-center gap-4"},ct={class:"flex items-center gap-2"},ft={class:"w-20"},vt=["value"],pt={class:"space-y-4"},_t={class:"flex items-center justify-between"},yt={class:"flex items-center justify-between"},ht={class:"text-sm"},gt={class:"flex items-center justify-between"},mt={class:"text-sm"},bt={class:"flex items-center justify-between"},wt={class:"text-sm"},kt={class:"space-y-2"},xt={class:"flex items-center gap-2"},Ct={class:"text-sm"},Rt=Se({__name:"Show",props:{video:{}},setup(ee){const te=[{title:"Dashboard",href:Te.url()},{title:"Videos",href:I.index.url()},{title:"View Video",href:"#"}],T=ee,c=w(null),u=w(null),_=w(!1),y=w(0),x=w(0),P=w(1),m=w(!1),U=w(!1),k=w(!1),oe=e=>{const s=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/youtube\.com\/watch\?.*v=([a-zA-Z0-9_-]{11})/,/youtube\.com\/shorts\/([a-zA-Z0-9_-]{11})/];for(const t of s){const v=e.match(t);if(v)return v[1]}return null},se=()=>{document.fullscreenElement?(document.exitFullscreen(),U.value=!1,n.info("Exited fullscreen")):(document.documentElement.requestFullscreen(),U.value=!0,n.info("Entered fullscreen"))},le=()=>{c.value&&(y.value=c.value.currentTime)},ae=()=>{c.value&&(x.value=c.value.duration,n.success(`Video loaded: ${S(x.value)}`))},ie=()=>{_.value=!1,n.info("Video ended")},q=Ve(()=>T.video.interactive_elements.filter(e=>e.is_active&&y.value>=e.start_time&&y.value<=(e.end_time||e.start_time+e.duration))),S=e=>{const s=Math.floor(e/60),t=Math.floor(e%60);return`${s}:${t.toString().padStart(2,"0")}`},ne=e=>{var s,t,v,b,h;n.info(`Clicked ${e.name||e.type} element`),((s=e.interaction)==null?void 0:s.onClick)==="popup"?n.info(`Popup: ${e.content.text||e.content.question||"Interactive element"}`):((t=e.interaction)==null?void 0:t.onClick)==="redirect"&&e.content.url?(window.open(e.content.url,"_blank"),n.info("Opened external link")):((v=e.interaction)==null?void 0:v.onClick)==="subscribe"?n.success("Subscribed to channel!"):((b=e.interaction)==null?void 0:b.onClick)==="like"?n.success("Liked the video!"):((h=e.interaction)==null?void 0:h.onClick)==="share"&&n.info("Share functionality would be implemented here")},re=e=>{console.log(`Hovering over ${e.name||e.type}`)},ue=()=>{n.success("Liked the video!")},de=()=>{navigator.share?navigator.share({title:T.video.title,text:T.video.description,url:window.location.href}).then(()=>{n.success("Video shared successfully!")}).catch(()=>{n.error("Failed to share video")}):navigator.clipboard.writeText(window.location.href).then(()=>{n.success("Video link copied to clipboard!")}).catch(()=>{n.error("Failed to copy link")})},ce=()=>{n.info("Comment functionality would be implemented here")},Z=()=>{if(typeof window<"u"&&window.YT&&window.YT.Player){const e=oe(T.video.source_url);e&&(u.value=new window.YT.Player("youtube-player",{height:"100%",width:"100%",videoId:e,playerVars:{autoplay:0,controls:1,showinfo:0,rel:0,modestbranding:1,fs:1,cc_load_policy:0,iv_load_policy:3,autohide:0,enablejsapi:1,origin:window.location.origin},events:{onReady:fe,onStateChange:ve,onError:pe}}))}},fe=e=>{x.value=e.target.getDuration(),k.value=!0,_e()},ve=e=>{const s=e.data;s===window.YT.PlayerState.PLAYING?(_.value=!0,n.success("Video started playing")):s===window.YT.PlayerState.PAUSED?(_.value=!1,n.info("Video paused")):s===window.YT.PlayerState.ENDED&&(_.value=!1,n.info("Video ended"))},pe=e=>{n.error("YouTube video failed to load"),console.error("YouTube error:",e)};let C=null;const _e=()=>{C&&clearInterval(C),C=setInterval(()=>{u.value&&u.value.getCurrentTime&&(y.value=u.value.getCurrentTime())},100)},ye=()=>{C&&(clearInterval(C),C=null)},A=()=>{k.value&&u.value?_.value?u.value.pauseVideo():u.value.playVideo():c.value&&(_.value?(c.value.pause(),_.value=!1,n.info("Video paused")):c.value.play().then(()=>{_.value=!0,n.success("Video started playing")}).catch(e=>{n.error("Failed to play video"),console.error("Play error:",e)}))},he=e=>{k.value&&u.value?(u.value.seekTo(e,!0),y.value=e,n.info(`Seeked to ${S(e)}`)):c.value&&(c.value.currentTime=e,y.value=e,n.info(`Seeked to ${S(e)}`))},ge=e=>{k.value&&u.value?(u.value.setVolume(e*100),P.value=e,m.value=e===0,n.info(`Volume set to ${Math.round(e*100)}%`)):c.value&&(c.value.volume=e,P.value=e,m.value=e===0,n.info(`Volume set to ${Math.round(e*100)}%`))},me=()=>{k.value&&u.value?m.value?(u.value.unMute(),m.value=!1,n.info("Volume unmuted")):(u.value.mute(),m.value=!0,n.info("Volume muted")):c.value&&(m.value?(c.value.volume=P.value,m.value=!1,n.info("Volume unmuted")):(c.value.volume=0,m.value=!0,n.info("Volume muted")))},be=()=>{k.value&&u.value?(u.value.seekTo(0,!0),y.value=0,n.info("Video restarted")):c.value&&(c.value.currentTime=0,y.value=0,n.info("Video restarted"))},we=e=>{const t=e.currentTarget.getBoundingClientRect(),h=(e.clientX-t.left)/t.width*x.value;he(h)};Pe(()=>{var e;if(k.value=T.video.source_type==="youtube",k.value)if(typeof window<"u"&&window.YT&&window.YT.Player)Z();else{const s=document.createElement("script");s.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];(e=t.parentNode)==null||e.insertBefore(s,t),window.onYouTubeIframeAPIReady=()=>{Z()}}});const ke=e=>{var s,t,v,b,h,V;return e.type!=="image"?"":((s=e.content)==null?void 0:s.sourceType)==="upload"&&((t=e.content)!=null&&t.uploadedFile)?e.content.uploadedFile:((v=e.content)==null?void 0:v.sourceType)==="url"&&((b=e.content)!=null&&b.url)||(h=e.content)!=null&&h.url?e.content.url:(V=e.content)!=null&&V.imageUrl?e.content.imageUrl:"https://picsum.photos/200/100"};return Ie(()=>{ye(),u.value&&u.value.destroy()}),(e,s)=>(r(),f(M,null,[l(o($e),{title:e.video.title},null,8,["title"]),l(Ce,{breadcrumbs:te},{default:i(()=>[a("div",Be,[a("div",Ne,[a("div",Ue,[l(o(L),{href:o(I).index.url()},{default:i(()=>[l(o(g),{variant:"outline",size:"sm"},{default:i(()=>[l(o(Ye),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),a("div",null,[a("h1",qe,d(e.video.title),1),a("p",Ze,d(e.video.description||"No description"),1)])]),a("div",He,[l(o(L),{href:o(I).edit.url({video:e.video.id})},{default:i(()=>[l(o(g),{variant:"outline",class:"gap-2"},{default:i(()=>[l(o(xe),{class:"h-4 w-4"}),s[1]||(s[1]=p(" Edit ",-1))]),_:1,__:[1]})]),_:1},8,["href"]),l(o(L),{href:o(I).preview.url({video:e.video.id})},{default:i(()=>[l(o(g),{variant:"outline",class:"gap-2"},{default:i(()=>[l(o(B),{class:"h-4 w-4"}),s[2]||(s[2]=p(" Preview ",-1))]),_:1,__:[2]})]),_:1},8,["href"])])]),a("div",Xe,[a("div",Oe,[l(o($),null,{default:i(()=>[l(o(E),null,{default:i(()=>[l(o(Y),null,{default:i(()=>s[3]||(s[3]=[p("Interactive Video Player",-1)])),_:1,__:[3]}),l(o(W),null,{default:i(()=>s[4]||(s[4]=[p(" Watch and interact with the video elements ",-1)])),_:1,__:[4]})]),_:1}),l(o(z),null,{default:i(()=>[a("div",Ge,[e.video.source_type==="youtube"?(r(),f("div",Je)):(r(),f("video",{key:1,ref_key:"videoRef",ref:c,src:`/storage/${e.video.video_path}`,class:"w-full h-full object-contain",onTimeupdate:le,onLoadedmetadata:ae,onEnded:ie,onClick:A},null,40,We)),a("div",Ke,[(r(!0),f(M,null,D(q.value,t=>{var v,b,h,V,H,X,O,G;return r(),f("div",{key:t.id,style:R({position:"absolute",left:t.position.x+"px",top:t.position.y+"px",width:t.position.width+"px",height:t.position.height+"px",backgroundColor:((v=t.styling)==null?void 0:v.backgroundColor)||"#ffffff",color:((b=t.styling)==null?void 0:b.textColor)||"#000000",fontSize:(((h=t.styling)==null?void 0:h.fontSize)||16)+"px",fontFamily:((V=t.styling)==null?void 0:V.fontFamily)||"Arial",borderRadius:(((H=t.styling)==null?void 0:H.borderRadius)||4)+"px",padding:(((X=t.styling)==null?void 0:X.padding)||8)+"px",zIndex:t.z_index,cursor:"pointer",pointerEvents:"all"}),onClick:F=>ne(t),onMouseenter:F=>re(t),class:"border-2 border-dashed border-transparent hover:border-blue-500 transition-colors"},[t.type==="text"?(r(),f("div",et,d(t.content.text),1)):t.type==="image"?(r(),f("img",{key:1,src:ke(t),class:"w-full h-full object-cover",alt:t.content.alt||"Interactive element"},null,8,tt)):t.type==="button"?(r(),f("button",{key:2,class:"w-full h-full flex items-center justify-center font-medium",style:R({backgroundColor:(O=t.styling)==null?void 0:O.backgroundColor,color:(G=t.styling)==null?void 0:G.textColor})},d(t.content.text),5)):t.type==="quiz"?(r(),f("div",ot,[a("div",st,d(t.content.question),1),a("div",lt,[(r(!0),f(M,null,D(t.content.options,(F,J)=>(r(),f("div",{key:J,class:"text-xs"},d(String.fromCharCode(65+J))+". "+d(F),1))),128))])])):t.type==="link"?(r(),f("a",{key:4,href:t.content.url,target:"_blank",class:"w-full h-full flex items-center justify-center text-blue-600 underline"},d(t.content.text),9,at)):(r(),f("div",it,d(t.type),1))],44,Qe)}),128))]),!_.value&&e.video.source_type!=="youtube"?(r(),f("div",{key:2,class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 cursor-pointer",onClick:A},[l(o(B),{class:"h-16 w-16 text-white"})])):Ee("",!0)]),a("div",nt,[a("div",rt,[a("div",ut,[a("span",null,d(S(y.value)),1),a("span",null,d(S(x.value)),1)]),a("div",{class:"w-full bg-gray-200 rounded-full h-2 cursor-pointer",onClick:we},[a("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:R({width:x.value>0?y.value/x.value*100+"%":"0%"})},null,4)])]),a("div",dt,[l(o(g),{onClick:A,variant:"outline",size:"sm"},{default:i(()=>[_.value?(r(),j(o(ze),{key:1,class:"h-4 w-4"})):(r(),j(o(B),{key:0,class:"h-4 w-4"}))]),_:1}),l(o(g),{onClick:be,variant:"outline",size:"sm"},{default:i(()=>[l(o(Me),{class:"h-4 w-4"})]),_:1}),a("div",ct,[l(o(g),{onClick:me,variant:"outline",size:"sm"},{default:i(()=>[m.value?(r(),j(o(Ae),{key:1,class:"h-4 w-4"})):(r(),j(o(je),{key:0,class:"h-4 w-4"}))]),_:1}),a("div",ft,[a("input",{type:"range",value:P.value*100,onInput:s[0]||(s[0]=t=>ge(t.target.value/100)),min:"0",max:"100",class:"w-full"},null,40,vt)])]),l(o(g),{onClick:se,variant:"outline",size:"sm"},{default:i(()=>[l(o(Fe),{class:"h-4 w-4"})]),_:1})])])]),_:1})]),_:1})]),a("div",pt,[l(o($),null,{default:i(()=>[l(o(E),null,{default:i(()=>[l(o(Y),null,{default:i(()=>s[5]||(s[5]=[p("Video Information",-1)])),_:1,__:[5]})]),_:1}),l(o(z),{class:"space-y-4"},{default:i(()=>[a("div",_t,[s[6]||(s[6]=a("span",{class:"text-sm text-muted-foreground"},"Status",-1)),l(o(K),{variant:e.video.is_published?"default":"secondary"},{default:i(()=>[p(d(e.video.is_published?"Published":"Draft"),1)]),_:1},8,["variant"])]),a("div",yt,[s[7]||(s[7]=a("span",{class:"text-sm text-muted-foreground"},"Source",-1)),a("span",ht,d(e.video.source_type==="youtube"?"YouTube":"Upload"),1)]),a("div",gt,[s[8]||(s[8]=a("span",{class:"text-sm text-muted-foreground"},"Created",-1)),a("span",mt,d(new Date(e.video.created_at).toLocaleDateString()),1)]),a("div",bt,[s[9]||(s[9]=a("span",{class:"text-sm text-muted-foreground"},"Updated",-1)),a("span",wt,d(new Date(e.video.updated_at).toLocaleDateString()),1)])]),_:1})]),_:1}),l(o($),null,{default:i(()=>[l(o(E),null,{default:i(()=>[l(o(Y),null,{default:i(()=>s[10]||(s[10]=[p("Interactive Elements",-1)])),_:1,__:[10]}),l(o(W),null,{default:i(()=>[p(d(e.video.interactive_elements.length)+" elements ",1)]),_:1})]),_:1}),l(o(z),null,{default:i(()=>[a("div",kt,[(r(!0),f(M,null,D(e.video.interactive_elements,t=>(r(),f("div",{key:t.id,class:Q(["flex items-center justify-between p-2 border rounded",{"bg-blue-50 border-blue-200":q.value.some(v=>v.id===t.id)}])},[a("div",xt,[a("div",{class:Q(["w-2 h-2 rounded-full",{"bg-green-500":t.is_active,"bg-gray-300":!t.is_active}])},null,2),a("span",Ct,d(t.name||t.type),1)]),l(o(K),{variant:"outline",class:"text-xs"},{default:i(()=>[p(d(t.type),1)]),_:2},1024)],2))),128))])]),_:1})]),_:1}),l(o($),null,{default:i(()=>[l(o(E),null,{default:i(()=>[l(o(Y),null,{default:i(()=>s[11]||(s[11]=[p("Actions",-1)])),_:1,__:[11]})]),_:1}),l(o(z),{class:"space-y-2"},{default:i(()=>[l(o(g),{onClick:ue,variant:"outline",class:"w-full gap-2"},{default:i(()=>[l(o(Le),{class:"h-4 w-4"}),s[12]||(s[12]=p(" Like ",-1))]),_:1,__:[12]}),l(o(g),{onClick:de,variant:"outline",class:"w-full gap-2"},{default:i(()=>[l(o(Re),{class:"h-4 w-4"}),s[13]||(s[13]=p(" Share ",-1))]),_:1,__:[13]}),l(o(g),{onClick:ce,variant:"outline",class:"w-full gap-2"},{default:i(()=>[l(o(De),{class:"h-4 w-4"}),s[14]||(s[14]=p(" Comment ",-1))]),_:1,__:[14]})]),_:1})]),_:1})])])])]),_:1})],64))}});export{Rt as default};
