import{a5 as L,x as h,I as C,E as q,J as B,k as N,d as F,K as $,a6 as G,a7 as _,a8 as V,a9 as j,U as K,aa as Y,f as z,o as H,w as R,a as J,u as b,p as Q}from"./app-Dce_nnrQ.js";import{g as X,S as P,P as Z}from"./index-C9PH3Rfu.js";import{q as W,i as ee,d as te,a as ne}from"./useForwardExpose-CjEZwap_.js";import{b as U,g as x,a as ae,c as re}from"./VisuallyHidden-DvhTT12b.js";function Ee(a,e="reka"){var s;return`${e}-${(s=L)==null?void 0:s()}`}function oe(a,e){const s=h(a);function r(d){return e[s.value][d]??s.value}return{state:s,dispatch:d=>{s.value=r(d)}}}function ie(a,e){var E;const s=h({}),r=h("none"),u=h(a),d=a.value?"mounted":"unmounted";let f;const l=((E=e.value)==null?void 0:E.ownerDocument.defaultView)??W,{state:m,dispatch:c}=oe(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),i=n=>{var o;if(ee){const p=new CustomEvent(n,{bubbles:!1,cancelable:!1});(o=e.value)==null||o.dispatchEvent(p)}};C(a,async(n,o)=>{var I;const p=o!==n;if(await q(),p){const M=r.value,y=w(e.value);n?(c("MOUNT"),i("enter"),y==="none"&&i("after-enter")):y==="none"||y==="undefined"||((I=s.value)==null?void 0:I.display)==="none"?(c("UNMOUNT"),i("leave"),i("after-leave")):o&&M!==y?(c("ANIMATION_OUT"),i("leave")):(c("UNMOUNT"),i("after-leave"))}},{immediate:!0});const t=n=>{const o=w(e.value),p=o.includes(n.animationName),I=m.value==="mounted"?"enter":"leave";if(n.target===e.value&&p&&(i(`after-${I}`),c("ANIMATION_END"),!u.value)){const M=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",f=l==null?void 0:l.setTimeout(()=>{var y;((y=e.value)==null?void 0:y.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=M)})}n.target===e.value&&o==="none"&&c("ANIMATION_END")},v=n=>{n.target===e.value&&(r.value=w(e.value))},g=C(e,(n,o)=>{n?(s.value=getComputedStyle(n),n.addEventListener("animationstart",v),n.addEventListener("animationcancel",t),n.addEventListener("animationend",t)):(c("ANIMATION_END"),f!==void 0&&(l==null||l.clearTimeout(f)),o==null||o.removeEventListener("animationstart",v),o==null||o.removeEventListener("animationcancel",t),o==null||o.removeEventListener("animationend",t))},{immediate:!0}),A=C(m,()=>{const n=w(e.value);r.value=m.value==="mounted"?n:"none"});return B(()=>{g(),A()}),{isPresent:N(()=>["mounted","unmountSuspended"].includes(m.value))}}function w(a){return a&&getComputedStyle(a).animationName||"none"}var Ie=F({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(a,{slots:e,expose:s}){var c;const{present:r,forceMount:u}=$(a),d=h(),{isPresent:f}=ie(r,d);s({present:f});let l=e.default({present:f.value});l=X(l||[]);const m=G();if(l&&(l==null?void 0:l.length)>1){const i=(c=m==null?void 0:m.parent)!=null&&c.type.name?`<${m.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${i}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(t=>`  - ${t}`).join(`
`)].join(`
`))}return()=>u.value||r.value||f.value?_(e.default({present:f.value})[0],{ref:i=>{const t=te(i);return typeof(t==null?void 0:t.hasAttribute)>"u"||(t!=null&&t.hasAttribute("data-reka-popper-content-wrapper")?d.value=t.firstElementChild:d.value=t),t}}):null}});const D="data-reka-collection-item";function se(a={}){const{key:e="",isProvider:s=!1}=a,r=`${e}CollectionProvider`;let u;if(s){const i=h(new Map);u={collectionRef:h(),itemMap:i},V(r,u)}else u=j(r);const d=(i=!1)=>{const t=u.collectionRef.value;if(!t)return[];const v=Array.from(t.querySelectorAll(`[${D}]`)),A=Array.from(u.itemMap.value.values()).sort((S,E)=>v.indexOf(S.ref)-v.indexOf(E.ref));return i?A:A.filter(S=>S.ref.dataset.disabled!=="")},f=F({name:"CollectionSlot",setup(i,{slots:t}){const{primitiveElement:v,currentElement:g}=U();return C(g,()=>{u.collectionRef.value=g.value}),()=>_(P,{ref:v},t)}}),l=F({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(i,{slots:t,attrs:v}){const{primitiveElement:g,currentElement:A}=U();return K(S=>{if(A.value){const E=Y(A.value);u.itemMap.value.set(E,{ref:A.value,value:i.value}),S(()=>u.itemMap.value.delete(E))}}),()=>_(P,{...v,[D]:"",ref:g},t)}}),m=N(()=>Array.from(u.itemMap.value.values())),c=N(()=>u.itemMap.value.size);return{getItems:d,reactiveItems:m,itemMapSize:c,CollectionSlot:f,CollectionItem:l}}const ue="rovingFocusGroup.onEntryFocus",le={bubbles:!1,cancelable:!0},ce={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fe(a,e){return e!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function ye(a,e,s){const r=fe(a.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ce[r]}function me(a,e=!1){const s=x();for(const r of a)if(r===s||(r.focus({preventScroll:e}),x()!==s))return}function Te(a,e){return a.map((s,r)=>a[(e+r)%a.length])}const[Se,de]=re("RovingFocusGroup");var ve=F({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(a,{expose:e,emit:s}){const r=a,u=s,{loop:d,orientation:f,dir:l}=$(r),m=ae(l),c=ne(r,"currentTabStopId",u,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),i=h(!1),t=h(!1),v=h(0),{getItems:g,CollectionSlot:A}=se({isProvider:!0});function S(n){const o=!t.value;if(n.currentTarget&&n.target===n.currentTarget&&o&&!i.value){const p=new CustomEvent(ue,le);if(n.currentTarget.dispatchEvent(p),u("entryFocus",p),!p.defaultPrevented){const I=g().map(T=>T.ref).filter(T=>T.dataset.disabled!==""),M=I.find(T=>T.getAttribute("data-active")===""),y=I.find(T=>T.getAttribute("data-highlighted")===""),O=I.find(T=>T.id===c.value),k=[M,y,O,...I].filter(Boolean);me(k,r.preventScrollOnEntryFocus)}}t.value=!1}function E(){setTimeout(()=>{t.value=!1},1)}return e({getItems:g}),de({loop:d,dir:m,orientation:f,currentTabStopId:c,onItemFocus:n=>{c.value=n},onItemShiftTab:()=>{i.value=!0},onFocusableItemAdd:()=>{v.value++},onFocusableItemRemove:()=>{v.value--}}),(n,o)=>(H(),z(b(A),null,{default:R(()=>[J(b(Z),{tabindex:i.value||v.value===0?-1:0,"data-orientation":b(f),as:n.as,"as-child":n.asChild,dir:b(m),style:{outline:"none"},onMousedown:o[0]||(o[0]=p=>t.value=!0),onMouseup:E,onFocus:S,onBlur:o[1]||(o[1]=p=>i.value=!1)},{default:R(()=>[Q(n.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Me=ve;export{Ie as P,Me as R,se as a,me as f,ye as g,Se as i,Ee as u,Te as w};
